jQuery.extend({createUploadIframe:function(e,t){var a="jUploadFrame"+e;if(window.ActiveXObject){var n=document.createElement('<iframe id="'+a+'" name="'+a+'" />');"boolean"==typeof t?n.src="javascript:false":"string"==typeof t&&(n.src=t)}else(n=document.createElement("iframe")).id=a,n.name=a;return n.style.position="absolute",n.style.top="-1000px",n.style.left="-1000px",document.body.appendChild(n),n},createUploadForm:function(e,t){var a="jUploadForm"+e,n="jUploadFile"+e,r=$('<form  action="" method="POST" name="'+a+'" id="'+a+'" enctype="multipart/form-data"></form>'),o=$("#"+t),u=$(o).clone();return $(o).attr("id",n),$(o).before(u),$(o).appendTo(r),$(r).css("position","absolute"),$(r).css("top","-1200px"),$(r).css("left","-1200px"),$(r).appendTo("body"),r},addOtherRequestsToForm:function(e,t){var a=$('<input type="hidden" name="" value="">');for(var n in t){name=n,value=t[n];var r=a.clone();r.attr({name:name,value:value}),$(r).appendTo(e)}return e},ajaxFileUpload:function(e){e=jQuery.extend({},jQuery.ajaxSettings,e);var t=(new Date).getTime(),a=jQuery.createUploadForm(t,e.fileElementId);e.data&&(a=jQuery.addOtherRequestsToForm(a,e.data));jQuery.createUploadIframe(t,e.secureuri);var n="jUploadFrame"+t,r="jUploadForm"+t;e.global&&!jQuery.active++&&jQuery.event.trigger("ajaxStart");var o=!1,u={};e.global&&jQuery.event.trigger("ajaxSend",[u,e]);var d=function(t){var r=document.getElementById(n);try{r.contentWindow?(u.responseText=r.contentWindow.document.body?r.contentWindow.document.body.innerHTML:null,u.responseXML=r.contentWindow.document.XMLDocument?r.contentWindow.document.XMLDocument:r.contentWindow.document):r.contentDocument&&(u.responseText=r.contentDocument.document.body?r.contentDocument.document.body.innerHTML:null,u.responseXML=r.contentDocument.document.XMLDocument?r.contentDocument.document.XMLDocument:r.contentDocument.document)}catch(t){jQuery.handleError(e,u,null,t)}if(u||"timeout"==t){o=!0;var d;try{if("error"!=(d="timeout"!=t?"success":"error")){var c=jQuery.uploadHttpData(u,e.dataType);e.success&&e.success(c,d),e.global&&jQuery.event.trigger("ajaxSuccess",[u,e])}else jQuery.handleError(e,u,d)}catch(t){d="error",jQuery.handleError(e,u,d,t)}e.global&&jQuery.event.trigger("ajaxComplete",[u,e]),e.global&&!--jQuery.active&&jQuery.event.trigger("ajaxStop"),e.complete&&e.complete(u,d),jQuery(r).unbind(),setTimeout(function(){try{$(r).remove(),$(a).remove()}catch(t){jQuery.handleError(e,u,null,t)}},100),u=null}};e.timeout>0&&setTimeout(function(){o||d("timeout")},e.timeout);try{a=$("#"+r);$(a).attr("action",e.url),$(a).attr("method","POST"),$(a).attr("target",n),a.encoding?a.encoding="multipart/form-data":a.enctype="multipart/form-data",$(a).submit()}catch(t){jQuery.handleError(e,u,null,t)}return window.attachEvent?document.getElementById(n).attachEvent("onload",d):document.getElementById(n).addEventListener("load",d,!1),{abort:function(){}}},uploadHttpData:function(r,type){var data=!type;if(data="xml"==type||data?r.responseXML:r.responseText,"script"==type&&jQuery.globalEval(data),"json"==type){var data=r.responseText,rx=new RegExp("<pre.*?>(.*?)</pre>","i"),am=rx.exec(data),data=am?am[1]:"";eval("data = "+data)}return"html"==type&&jQuery("<div>").html(data).evalScripts(),data}});